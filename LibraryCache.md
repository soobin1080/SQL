# # 라이브러리 캐시 구조
- 라이브러리 캐시는 Shared Pool 내에 위치하고 SQL 공유 커서 및 DB 오브젝트(테이블, 인덱스 등)에 대한 정보 관리 역할
- 여기에 저장되는 정보 단위를 라이브러리 캐시 오브젝트(LCO) 라고 함
  - **A.데이터 딕셔너리캐시에도 캐싱되어 있는 스키마 오브젝트 정보를 라이브러리 캐시에 중복 저장하는 이유는?
  - **Q.LCO 간 의존성 관리 목적, LCO 각각에는 자신이 참조하는 다른 실행가능 LCO(커서, 함수, 프로시저, 패키지 등) 목록을 가진다.
 
  1. Drop 하기 전까지 영구보관되는 오브젝트 (Stored Object) : 테이블, 인덱스, 클러스터, 뷰, 트리거, 패키지, 사용자 정의 함수/프로시저 등 (생성될 때부터 이름을 가지는 특징)
  2. 실행 시점 생성되어 인스턴스가 떠있는 동안 존재하는 일시적인 오브젝트 (Transient Object) : 커서와 Anonymous PL/SQL 문

- 라이브러리 캐시는 데이터 딕셔너리 캐시와 함께 Shared Pool에 할당된 메모리 공간 사용, Shared Pool도 DB버퍼캐시 처럼 **LRU 알고리즘**으로 관리
- Shared Pool를 Sub Pool 로 나누어 7개 래치까지 사용가능(9i버전부터), 7개 이상 사용하면 경합 현상 발생
- 라이브러리 캐시 : 해시구조로 관리, 해시 버킷에 LCO 핸들(LCO를 식벽하고 힙을 포인팅하는데 사용)이 체인으로 연결되어있음. 핸들을 통해 LCO 힙을 찾는 구조
  1) LCO 접근 시 라이브러리 캐시 Lock 획득 필요
  2) LCO 내용 읽거나 변경 시 Pin을 걸어야 함
 
- 라이브러리 캐시 최적화를 위한 개발 측면 노력 3가지
  1) 커서를 공유할 수 있는 형태로 SQL 작성
     특히, 바인드 변수를 사용해 같은 형태의 SQL에 대한 반복적인 하드파싱이 일어나지 않도록 해야된다.
  2) **세션 커서 캐싱** 기능을 이용해 라이브러리 캐시에서 SQL 찾는 비용을 줄인다.
  3) **애플리케이션 커서 캐싱**을 이용해 Parse Call 발생량을 줄인다. 
